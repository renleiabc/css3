<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <a href="dsadas">asdasdas</a>
    <div>
        <textarea rows='8' cols="100">
       <!doctype html>
            <html>
                  <head>
            <meta charset="utf-8">
            <title>测试</title>
                      </head>

            <body>
                <h1>测试</h1>
            </body>

            </html>
        </textarea>
    </div>
    <input type="button" value="点击">
    <script>
        var eleTextarea = document.querySelector('textarea');
        var eleButton = document.querySelector('input[type="button"]');
        console.log(eleButton)
        //下载文件的方法
        function funDownload(content, filename) {
            var eleLink = document.createElement('a');
            eleLink.download = filename;
            eleLink.style.display = 'none';
            // 字符的内容变成blob地址
            var blob = new Blob([content], { 'type': contentType });
            eleLink.href = URL.createObjectURL(blob);
            // 触发点击
            document.body.appendChild(eleLink);
            eleLink.click();
            //移除
            document.body.removeChild(eleLink);

        }
        if ('download' in document.createElement('a')) {
            // 作为test.html文件下载
            eleButton.addEventListener('click', function(param) {
                download("data.txt", "hello worlddsadasdasdasdasdasdadasdasdadas ");
            });
        } else {
            eleButton.onClick = function(param) {
                alert('浏览器不支持！')
            }
        }

        function download(filename, text) {
            var pom = document.createElement('a');
            pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            pom.setAttribute('download', filename);
            if (document.createEvent) {
                var event = document.createEvent('MouseEvents');
                event.initEvent('click', true, true);
                pom.dispatchEvent(event);
            } else {
                pom.click();
            }
        }
        // download("data.txt", "hello worlddsadasdasdasdasdasdadasdasdadas ");
    </script>
</body>

</html>